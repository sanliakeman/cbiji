<h1>Makefile规则</h1>

make执行Makefile或者makefile

如果文件名不是默认文件名

则需使用-f指定文件名称

目标:依赖<br>
(tab)命令

三要素
<ol>
<li>目标：要生成的文件</li>
<li>依赖:目标文件由哪些文件生成</li>
<li>规则:使用命令使依赖生成目标文件</li>
</ol>

<h2>执行过程</h2>

<ol>
	<li>检查第一个目标的依赖文件，如果都存在，执行命令</li>
	<li>如果文件不存在，寻找下一个目标执行规则，找到生成依赖文件的规则</li>
	<li>如果目标依赖文件修改时间大于目标文件，重新执行命令</li>
</ol>


<h2>变量</h2>

<ul>
<li>普通变量</li>
<li>自带变量</li>
<li>自动变量</li>
</ul>

<h3>普通变量</h3>

自定义变量

例:<br>
    foo=abc//定义变量并赋值<br>
	bar=$(foo)//使用变量

<h3>自带变量</h3>

<ul>
<li>CC=gcc</li>
<li>CPPFLAGS=C预处理的选项 -I(找到头文件，展开)</li>
<li>CFLAGS=C编译器的选项 -Wall -g -c</li>
<li>LDFLAGS=链接器选项 -L -l</li>
</ul>

<h3>自动变量</h3>



<ul>
<li>$@=规则目标</li>
<li>$<=表示规则中的第一个条件</li>
<li>$^=表示规则中的所有条件，组成一个列表，空格隔开，如果有重复的，则取消消除重复选项</li>
</ul>


<h2>模式规则</h2>


至少在规则的目标定义中要包含%,%表示一个或多个,在依赖条件中同样可以使用%，依赖条件中的%的取值取决于其目标


<h2>Makefile函数</h2>

<ol>
<li>wildcard 查找指定目录下的指定类型的文件
src=$(wildcard *.c)//找到当前目录下所有后缀为.c的文件，赋值给src</li>
<li>patsubst 匹配替换
obj=$(patsubst %.c, %.o, $(src))//把src变量里所有后缀为.c的文件替换成.o</li>
</ol>


<h2>伪目标</h2>

.PHONY:clean //伪目标clean

命令前加上@，表示不显示执行命令

命令前加上-，如果命令报错，继续执行下面命令
















